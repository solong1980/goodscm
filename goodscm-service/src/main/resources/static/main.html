<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="csrf-token" content="WV1kBlxM0od7YKo6cwDeqkmRT3kqhqgcb6btXUWg">
  <title>情趣水订管理平台</title>
  <link href="/static/logo.png" type="image/x-icon" rel="shortcut icon">
  <link rel="stylesheet" href="/static/layui/css/layui.css"  media="all">
  <style type="text/css">
	.platform_header_title{
	    right: 300px;
	    display: inline-block;
	    color: red;
	    font-size: 16px;
	    text-align:  center;
	    line-height: 60px;
	 }
	 .menu-item{
	 	margin-left: 10px;
	 }
	 .content-row-height{
	 	height: 30px;
	 }
  </style>
</head>

<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
  <div class="layui-header">
    <div class="layui-logo">水War</div>
    <!-- 头部区域（可配合layui已有的水平导航） -->
    <ul class="layui-nav layui-layout-left">
      <li class="layui-nav-item"><a href="">控制台</a></li>
      <li class="layui-nav-item"><a href="">商品管理</a></li>
      <li class="layui-nav-item"><a href="">用户</a></li>
      <li class="layui-nav-item">
        <a href="javascript:;">其它系统</a>
        <dl class="layui-nav-child">
          <dd><a href="">邮件管理</a></dd>
          <dd><a href="">消息管理</a></dd>
          <dd><a href="">授权管理</a></dd>
        </dl>
      </li>
    </ul>
    <div class="layui-nav layui-layout-right platform_header_title">Hi，<em title="趣订水演示版">Qin趣水订演示版</em></div>
    <ul class="layui-nav layui-layout-right">
      <li class="layui-nav-item">
        <a href="javascript:;">
          <img src="http://t.cn/RCzsdCq" class="layui-nav-img"> 管理员
        </a>
        <dl class="layui-nav-child">
          <dd><a href="">基本资料</a></dd>
          <dd><a href="">安全设置</a></dd>
          <dd><a href="https://www.qudingshui.com/center/admin/edit-nickname">修改昵称</a></dd>
          <dd><a href="https://www.qudingshui.com/center/admin/edit-password">修改密码</a></dd>
        </dl>
      </li>
      <li class="layui-nav-item"><a href="">退出</a></li>
    </ul>
  </div>
  
  <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
      <ul class="layui-nav layui-nav-tree"  lay-filter="test" id="subnav">
      </ul>
    </div>
  </div>
  
  <div class="layui-body">
    <div id="main" style="padding: 15px;">内容主体区域</div>
  </div>
  
  <div class="layui-footer">
    <!-- 底部固定区域 -->
    © layui.com - 底部固定区域
  </div>
</div>

<script type="text/javascript" src="/static/layui/layui.js"></script>
<!--[if lt IE 9]>
<script type="text/javascript" src="/static/jquery/jquery-1.10.2.js"></script>
<![endif]-->
<!--[if gte IE 9]><!-->
<script type="text/javascript" src="/static/jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="/static/jquery-mousewheel/jquery.mousewheel.js"></script>
<script type="text/javascript" src="/static/handlebars/handlebars-v4.0.11.js"></script>

<!-- 菜单模板 -->
<script id="menu-entry-template" type="text/x-handlebars-template">
	{{#each menus}}
		<li class="layui-nav-item">
        <a class="menu" href="javascript:;">{{menu}}</a>
        <dl class="layui-nav-child">
          {{#each submenu}}
			<dd><a class="menu-item" href="#!{{link}}">{{name}}</a></dd>
			{{/each}}
        </dl>
		</li>
	{{/each}}
</script>

<script>
//JavaScript代码区域
layui.use('element', function(){
  var element = layui.element;
});
/* layui.define(['element','layer','form'], function(exports){
	  var layer = layui.layer
	  ,form = layui.form,
	  element = layui.element;
	  layer.msg('Hello World');
	  exports('main', {
		  breadcrumb:function(){
			  element.breadcrumb();
		  }
	  });
}); */
$.ajaxSetup({
	headers: {
		'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
	},
	error: function (xhr, status, e) {
		alert("系统产生异常"); 
	}
});
      
(function($) {
	var compiled = {};
	$.fn.handlebars = function(template, data) {
		if (template instanceof jQuery) {
			template = $(template).html();
		}
		if(!compiled[template]){
			compiled[template] = Handlebars.compile(template);
		}
		this.html(compiled[template](data));
	};
	
	
	 $('#subnav').handlebars($('#menu-entry-template'), {
			menus:[
				{
					menu:"用户管理",
					submenu:[
				   		{
							name:"用户列表",
							link:"/static/users.html"
						}
					]
				},
				{
					menu:"订单管理",
					submenu:[
				   		{
							name:"送水订单",
							link:"/orders"
						},{
							name:"水票订单",
							link:"https://www.qudingshui.com/center/single/bill-order"
						}
					]
				},{
					menu:"店铺管理",
					submenu:[
				   		{
							name:"我的店铺",
							link:"/static/shops.html"
						},{
							name:"续费记录",
							link:"https://www.qudingshui.com/center/single/shop-charge-record"
						},{
							name:"外设列表",
							link:"https://www.qudingshui.com/center/single/peripheral-index"
						}
					]
				},{
					menu:"商品管理",
					submenu:[
				   		{
							name:"商品列表",
							link:"https://www.qudingshui.com/center/single/goods"
						}
					]
				},{
					menu:"水票管理",
					submenu:[
				   		{
							name:"水票列表",
							link:"https://www.qudingshui.com/center/single/bill"
						},{
							name:"水票套餐",
							link:"https://www.qudingshui.com/center/single/bill-category"
						}
					]
				},{
					menu:"水桶管理",
					submenu:[
				   		{
							name:"水桶记录",
							link:"https://www.qudingshui.com/center/single/bucket-data"
						},{
							name:"水桶品牌",
							link:"https://www.qudingshui.com/center/single/bucket-category"
						}
					]
				},{
					menu:"工人管理",
					submenu:[
				   		{
							name:"工人列表",
							link:"https://www.qudingshui.com/center/single/worker"
						}
					]
				},{
					menu:"微信设置",
					submenu:[
				   		{
							name:"微信设置",
							link:"https://www.qudingshui.com/center/single/wechat"
						}
					]
				}
			]
		});
})(jQuery);

//导航高亮
function highlightSubnav(url){
	var c = $("dd[class='layui-this']");
	c&&c.removeClass('layui-this');
    $('dd').find('a[href="'+url+'"]').parent().addClass('layui-this');
}

function loadContent(that){
	//优化缓存页面
	var link = $(that).attr("href");
	//切换点击后的菜单项样式
	if(link&&link.indexOf('#!')>-1)
		link = link.substring(2);
	$("#main").load(link);
}

//菜单绑定点击事件
$(function(){
	   $("a[class='menu-item']").bind('click',function(){
			var link = $(this).attr("href");
			//切换点击后的菜单项样式
   			highlightSubnav(link)
   			loadContent(this)
	   });
	   $($("a[class='menu']")[1]).parent().addClass('layui-nav-itemed');
	   $($("a[class='menu-item']")[1]).trigger('click');
})
</script>
</body>
</html>